import type {
  SkillTree,
  SkillNode,
  SpecializationPath,
  SkillTier,
  MagicalElement,
} from "../types/skillTree";

// Fire Element Skill Tree
export const createFireSkillTree = (characterId: string): SkillTree => ({
  id: `fire_tree_${characterId}`,
  name: "Flames of Power",
  description: "Master the destructive and passionate power of fire magic",
  characterId,
  element: "fire",
  nodes: [
    // Tier 1 - Basic
    {
      id: "fire_spark",
      name: "Spark",
      description: "Basic fire magic - creates small flames",
      tier: "basic",
      maxRank: 5,
      currentRank: 0,
      prerequisites: [],
      unlocks: ["fire_bolt", "fire_resistance"],
      position: { x: 2, y: 0, tier: "basic" },
      costs: [
        {
          type: "skill_points",
          amount: 1,
          scaling: "linear",
          rankMultiplier: 1,
        },
      ],
      requirements: [],
      effects: [
        {
          id: "fire_damage_basic",
          type: "stat_bonus",
          target: "self",
          value: 10,
          scaling: {
            baseValue: 10,
            perRank: 5,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: true,
          description: "Increases fire damage",
          displayFormat: "+{value} Fire Damage",
        },
      ],
      scaling: {
        baseValue: 10,
        perRank: 5,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "ðŸ”¥",
      color: "#ff4444",
      category: "offensive",
      tags: ["elemental", "fire", "basic"],
      isUnlocked: true,
      isLearnable: true,
      isMaxRank: false,
    },
    {
      id: "fire_bolt",
      name: "Fire Bolt",
      description: "Launches a concentrated bolt of fire at enemies",
      tier: "basic",
      maxRank: 3,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "fire_spark", minimumRank: 1 },
      ],
      unlocks: ["fire_blast", "burning_hands"],
      position: { x: 1, y: 1, tier: "basic" },
      costs: [
        {
          type: "skill_points",
          amount: 2,
          scaling: "linear",
          rankMultiplier: 1.5,
        },
      ],
      requirements: [],
      effects: [
        {
          id: "fire_bolt_ability",
          type: "new_ability",
          target: "self",
          value: 1,
          scaling: {
            baseValue: 25,
            perRank: 10,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          description: "Unlocks Fire Bolt ability",
          displayFormat: "Fire Bolt: {value} base damage",
        },
      ],
      scaling: {
        baseValue: 25,
        perRank: 10,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "âš¡",
      color: "#ff6644",
      category: "offensive",
      tags: ["elemental", "fire", "projectile"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
    },
    {
      id: "fire_resistance",
      name: "Fire Resistance",
      description: "Builds resistance to fire damage and heat effects",
      tier: "basic",
      maxRank: 5,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "fire_spark", minimumRank: 1 },
      ],
      unlocks: ["heat_aura"],
      position: { x: 3, y: 1, tier: "basic" },
      costs: [
        {
          type: "skill_points",
          amount: 1,
          scaling: "linear",
          rankMultiplier: 1,
        },
      ],
      requirements: [],
      effects: [
        {
          id: "fire_resistance_passive",
          type: "stat_bonus",
          target: "self",
          value: 15,
          scaling: {
            baseValue: 15,
            perRank: 8,
            scalingType: "additive",
            diminishingReturns: true,
            softCap: 75,
          },
          isPercentage: true,
          stackable: false,
          description: "Reduces fire damage taken",
          displayFormat: "{value}% Fire Resistance",
        },
      ],
      scaling: {
        baseValue: 15,
        perRank: 8,
        scalingType: "additive",
        diminishingReturns: true,
        softCap: 75,
      },
      icon: "ðŸ›¡ï¸",
      color: "#ff8844",
      category: "defensive",
      tags: ["elemental", "fire", "resistance"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
    },

    // Tier 2 - Intermediate
    {
      id: "fire_blast",
      name: "Fire Blast",
      description: "Area-of-effect fire explosion",
      tier: "intermediate",
      maxRank: 3,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "fire_bolt", minimumRank: 2 },
      ],
      unlocks: ["inferno_path", "combustion"],
      position: { x: 0, y: 2, tier: "intermediate", branch: "offensive" },
      costs: [
        {
          type: "skill_points",
          amount: 3,
          scaling: "linear",
          rankMultiplier: 2,
        },
      ],
      requirements: [
        {
          type: "level",
          value: 10,
          description: "Requires character level 10",
        },
      ],
      effects: [
        {
          id: "fire_blast_ability",
          type: "new_ability",
          target: "self",
          value: 1,
          scaling: {
            baseValue: 40,
            perRank: 15,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          description: "Unlocks Fire Blast AoE ability",
          displayFormat: "Fire Blast: {value} AoE damage",
        },
      ],
      scaling: {
        baseValue: 40,
        perRank: 15,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "ðŸ’¥",
      color: "#ff2222",
      category: "offensive",
      tags: ["elemental", "fire", "aoe"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
      specializationPath: "destroyer",
      branchType: "specialized",
    },
    {
      id: "burning_hands",
      name: "Burning Hands",
      description: "Melee attacks ignite enemies with persistent burn effects",
      tier: "intermediate",
      maxRank: 4,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "fire_bolt", minimumRank: 1 },
      ],
      unlocks: ["flame_warrior_path"],
      position: { x: 2, y: 2, tier: "intermediate", branch: "hybrid" },
      costs: [
        {
          type: "skill_points",
          amount: 2,
          scaling: "linear",
          rankMultiplier: 1.5,
        },
      ],
      requirements: [],
      effects: [
        {
          id: "burning_hands_passive",
          type: "triggered_effect",
          target: "enemies",
          value: 5,
          scaling: {
            baseValue: 5,
            perRank: 3,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: true,
          maxStacks: 3,
          triggers: [
            { event: "on_attack", chance: 30, description: "On melee attack" },
          ],
          description: "Melee attacks apply burn effect",
          displayFormat: "{value} burn damage per turn (30% chance)",
        },
      ],
      scaling: {
        baseValue: 5,
        perRank: 3,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "ðŸ‘",
      color: "#ff6622",
      category: "offensive",
      tags: ["elemental", "fire", "melee", "debuff"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
    },
    {
      id: "heat_aura",
      name: "Heat Aura",
      description: "Passive aura that damages nearby enemies and helps allies",
      tier: "intermediate",
      maxRank: 3,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "fire_resistance", minimumRank: 3 },
      ],
      unlocks: ["guardian_flame_path"],
      position: { x: 4, y: 2, tier: "intermediate", branch: "defensive" },
      costs: [
        {
          type: "skill_points",
          amount: 3,
          scaling: "linear",
          rankMultiplier: 2,
        },
      ],
      requirements: [],
      effects: [
        {
          id: "heat_aura_damage",
          type: "passive_effect",
          target: "enemies",
          value: 3,
          scaling: {
            baseValue: 3,
            perRank: 2,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          description: "Damages nearby enemies each turn",
          displayFormat: "{value} damage per turn to nearby enemies",
        },
        {
          id: "heat_aura_warmth",
          type: "passive_effect",
          target: "allies",
          value: 2,
          scaling: {
            baseValue: 2,
            perRank: 1,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          description: "Slowly heals nearby allies",
          displayFormat: "{value} healing per turn to nearby allies",
        },
      ],
      scaling: {
        baseValue: 3,
        perRank: 2,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "ðŸŒ¡ï¸",
      color: "#ff8822",
      category: "support",
      tags: ["elemental", "fire", "aura", "passive"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
      specializationPath: "protector",
      branchType: "specialized",
    },

    // Tier 3 - Advanced (Specialization Paths)
    {
      id: "inferno",
      name: "Inferno",
      description: "Devastating fire magic that consumes everything",
      tier: "advanced",
      maxRank: 2,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "fire_blast", minimumRank: 2 },
        { type: "total_points", value: 15 },
      ],
      unlocks: ["phoenix_rebirth"],
      position: { x: 0, y: 3, tier: "advanced", branch: "specialized" },
      costs: [
        {
          type: "skill_points",
          amount: 5,
          scaling: "exponential",
          rankMultiplier: 2,
        },
        {
          type: "special_currency",
          amount: 1,
          scaling: "fixed",
          rankMultiplier: 1,
        },
      ],
      requirements: [
        {
          type: "level",
          value: 20,
          description: "Requires character level 20",
        },
        {
          type: "element_affinity",
          value: "fire",
          description: "Must have high fire affinity",
        },
      ],
      effects: [
        {
          id: "inferno_ability",
          type: "new_ability",
          target: "enemies",
          value: 100,
          scaling: {
            baseValue: 100,
            perRank: 50,
            scalingType: "multiplicative",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          description: "Ultimate fire destruction ability",
          displayFormat: "Inferno: {value} massive AoE damage",
        },
      ],
      scaling: {
        baseValue: 100,
        perRank: 50,
        scalingType: "multiplicative",
        diminishingReturns: false,
      },
      icon: "ðŸ”¥ðŸ’€",
      color: "#cc0000",
      category: "offensive",
      tags: ["elemental", "fire", "ultimate", "aoe"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
      specializationPath: "destroyer",
      branchType: "capstone",
    },
    {
      id: "flame_warrior",
      name: "Flame Warrior",
      description: "Become one with fire, enhancing physical combat",
      tier: "advanced",
      maxRank: 3,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "burning_hands", minimumRank: 3 },
      ],
      unlocks: ["living_flame"],
      position: { x: 2, y: 3, tier: "advanced", branch: "specialized" },
      costs: [
        {
          type: "skill_points",
          amount: 4,
          scaling: "linear",
          rankMultiplier: 2,
        },
      ],
      requirements: [
        {
          type: "level",
          value: 18,
          description: "Requires character level 18",
        },
      ],
      effects: [
        {
          id: "flame_weapon_enhancement",
          type: "passive_effect",
          target: "self",
          value: 25,
          scaling: {
            baseValue: 25,
            perRank: 15,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: true,
          stackable: false,
          description: "Weapons deal additional fire damage",
          displayFormat: "+{value}% weapon damage as fire",
        },
        {
          id: "flame_armor",
          type: "passive_effect",
          target: "self",
          value: 10,
          scaling: {
            baseValue: 10,
            perRank: 5,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          description: "Fire aura provides defense",
          displayFormat: "+{value} Defense while in combat",
        },
      ],
      scaling: {
        baseValue: 25,
        perRank: 15,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "âš”ï¸ðŸ”¥",
      color: "#dd4400",
      category: "offensive",
      tags: ["elemental", "fire", "melee", "enhancement"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
      specializationPath: "striker",
      branchType: "specialized",
    },
    {
      id: "guardian_flame",
      name: "Guardian Flame",
      description: "Protective fire magic that shields and heals",
      tier: "advanced",
      maxRank: 3,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "heat_aura", minimumRank: 2 },
      ],
      unlocks: ["eternal_hearth"],
      position: { x: 4, y: 3, tier: "advanced", branch: "specialized" },
      costs: [
        {
          type: "skill_points",
          amount: 4,
          scaling: "linear",
          rankMultiplier: 2,
        },
      ],
      requirements: [
        {
          type: "level",
          value: 18,
          description: "Requires character level 18",
        },
      ],
      effects: [
        {
          id: "protective_flames",
          type: "new_ability",
          target: "allies",
          value: 30,
          scaling: {
            baseValue: 30,
            perRank: 10,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          description: "Create protective fire barriers for allies",
          displayFormat: "Guardian Flame: {value} shield strength",
        },
      ],
      scaling: {
        baseValue: 30,
        perRank: 10,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "ðŸ›¡ï¸ðŸ”¥",
      color: "#ff8800",
      category: "support",
      tags: ["elemental", "fire", "protection", "support"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
      specializationPath: "guardian",
      branchType: "specialized",
    },

    // Tier 4 - Master (Ultimate abilities)
    {
      id: "phoenix_rebirth",
      name: "Phoenix Rebirth",
      description:
        "The ultimate fire mastery - rise from ashes stronger than before",
      tier: "master",
      maxRank: 1,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "inferno", minimumRank: 1 },
        { type: "total_points", value: 30 },
      ],
      unlocks: [],
      position: { x: 1, y: 4, tier: "master", branch: "capstone" },
      costs: [
        {
          type: "skill_points",
          amount: 10,
          scaling: "fixed",
          rankMultiplier: 1,
        },
        {
          type: "special_currency",
          amount: 5,
          scaling: "fixed",
          rankMultiplier: 1,
        },
      ],
      requirements: [
        {
          type: "level",
          value: 30,
          description: "Requires character level 30",
        },
        {
          type: "transformation_mastery",
          value: "advanced",
          description: "Must master fire transformation",
        },
      ],
      effects: [
        {
          id: "phoenix_rebirth_passive",
          type: "special_mechanic",
          target: "self",
          value: 1,
          scaling: {
            baseValue: 1,
            perRank: 0,
            scalingType: "fixed",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          conditions: [
            {
              type: "health_threshold",
              value: 0,
              operator: "less_equal",
              description: "When health reaches 0",
            },
          ],
          description: "Automatically revive with full health once per battle",
          displayFormat: "Phoenix Rebirth: Revive on death (once per battle)",
        },
      ],
      scaling: {
        baseValue: 1,
        perRank: 0,
        scalingType: "fixed",
        diminishingReturns: false,
      },
      icon: "ðŸ”¥ðŸ”„",
      color: "#ffaa00",
      category: "mastery",
      tags: ["elemental", "fire", "ultimate", "revival"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
      specializationPath: "destroyer",
      branchType: "capstone",
    },
  ],
  connections: [
    {
      fromNode: "fire_spark",
      toNode: "fire_bolt",
      connectionType: "prerequisite",
    },
    {
      fromNode: "fire_spark",
      toNode: "fire_resistance",
      connectionType: "prerequisite",
    },
    {
      fromNode: "fire_bolt",
      toNode: "fire_blast",
      connectionType: "prerequisite",
    },
    {
      fromNode: "fire_bolt",
      toNode: "burning_hands",
      connectionType: "prerequisite",
    },
    {
      fromNode: "fire_resistance",
      toNode: "heat_aura",
      connectionType: "prerequisite",
    },
    { fromNode: "fire_blast", toNode: "inferno", connectionType: "upgrade" },
    {
      fromNode: "burning_hands",
      toNode: "flame_warrior",
      connectionType: "upgrade",
    },
    {
      fromNode: "heat_aura",
      toNode: "guardian_flame",
      connectionType: "upgrade",
    },
    {
      fromNode: "inferno",
      toNode: "phoenix_rebirth",
      connectionType: "mastery",
    },
  ],
  specializations: [
    {
      id: "destroyer",
      name: "Flame Destroyer",
      description: "Pure offensive fire magic focused on maximum destruction",
      element: "fire",
      theme: "destroyer",
      keyNodes: ["fire_blast", "inferno", "phoenix_rebirth"],
      capstoneNode: "phoenix_rebirth",
      branchNodes: ["fire_bolt"],
      unlockRequirements: [
        {
          type: "nodes_unlocked",
          value: 3,
          description: "Unlock 3 fire nodes",
        },
      ],
      masteryRequirements: [
        {
          level: "apprentice",
          requirements: [
            {
              type: "specific_nodes",
              value: "fire_blast",
              description: "Learn Fire Blast",
              nodeIds: ["fire_blast"],
            },
          ],
          rewards: [
            {
              type: "stat_bonus",
              value: "10% increased fire damage",
              description: "+10% Fire Damage",
            },
          ],
        },
        {
          level: "adept",
          requirements: [
            {
              type: "specific_nodes",
              value: "inferno",
              description: "Learn Inferno",
              nodeIds: ["inferno"],
            },
          ],
          rewards: [
            {
              type: "ability_unlock",
              value: "flame_mastery",
              description: "Unlock Flame Mastery passive",
            },
          ],
        },
      ],
      pathBonuses: [
        {
          id: "destroyer_bonus_1",
          name: "Burning Passion",
          description: "Fire spells have increased critical hit chance",
          type: "stat_increase",
          value: 15,
          requiredNodes: 2,
          requiredMastery: "apprentice",
          effects: [
            {
              id: "fire_crit_bonus",
              type: "stat_bonus",
              target: "self",
              value: 15,
              scaling: {
                baseValue: 15,
                perRank: 0,
                scalingType: "fixed",
                diminishingReturns: false,
              },
              isPercentage: true,
              stackable: false,
              description: "Increased critical hit chance for fire spells",
              displayFormat: "+{value}% Fire Spell Critical Chance",
            },
          ],
          isActive: false,
        },
      ],
      synergies: [],
      color: "#cc0000",
      icon: "ðŸ’¥ðŸ”¥",
      nodesInPath: 3,
      nodesUnlocked: 0,
      masteryLevel: "novice",
      conflictsWith: [],
      isExclusive: false,
    },
    {
      id: "striker",
      name: "Flame Striker",
      description:
        "Hybrid combat style mixing fire magic with physical prowess",
      element: "fire",
      theme: "striker",
      keyNodes: ["burning_hands", "flame_warrior"],
      capstoneNode: "flame_warrior",
      branchNodes: ["fire_bolt"],
      unlockRequirements: [
        {
          type: "nodes_unlocked",
          value: 2,
          description: "Unlock 2 fire nodes",
        },
      ],
      masteryRequirements: [
        {
          level: "apprentice",
          requirements: [
            {
              type: "specific_nodes",
              value: "burning_hands",
              description: "Learn Burning Hands",
              nodeIds: ["burning_hands"],
            },
          ],
          rewards: [
            {
              type: "stat_bonus",
              value: "5% increased melee damage",
              description: "+5% Melee Damage",
            },
          ],
        },
      ],
      pathBonuses: [
        {
          id: "striker_bonus_1",
          name: "Combat Synergy",
          description: "Melee and fire abilities enhance each other",
          type: "synergy_unlock",
          value: 10,
          requiredNodes: 2,
          requiredMastery: "apprentice",
          effects: [
            {
              id: "combat_synergy",
              type: "synergy_bonus",
              target: "self",
              value: 10,
              scaling: {
                baseValue: 10,
                perRank: 0,
                scalingType: "fixed",
                diminishingReturns: false,
              },
              isPercentage: true,
              stackable: false,
              description:
                "Melee attacks boost fire spell damage and vice versa",
              displayFormat: "+{value}% damage when combining melee and fire",
            },
          ],
          isActive: false,
        },
      ],
      synergies: [],
      color: "#dd4400",
      icon: "âš”ï¸ðŸ”¥",
      nodesInPath: 2,
      nodesUnlocked: 0,
      masteryLevel: "novice",
      conflictsWith: [],
      isExclusive: false,
    },
    {
      id: "guardian",
      name: "Flame Guardian",
      description: "Protective fire magic focused on defense and support",
      element: "fire",
      theme: "guardian",
      keyNodes: ["heat_aura", "guardian_flame"],
      capstoneNode: "guardian_flame",
      branchNodes: ["fire_resistance"],
      unlockRequirements: [
        {
          type: "nodes_unlocked",
          value: 2,
          description: "Unlock 2 defensive fire nodes",
        },
      ],
      masteryRequirements: [
        {
          level: "apprentice",
          requirements: [
            {
              type: "specific_nodes",
              value: "heat_aura",
              description: "Learn Heat Aura",
              nodeIds: ["heat_aura"],
            },
          ],
          rewards: [
            {
              type: "stat_bonus",
              value: "15% increased healing power",
              description: "+15% Healing Power",
            },
          ],
        },
      ],
      pathBonuses: [
        {
          id: "guardian_bonus_1",
          name: "Protective Warmth",
          description: "Fire auras provide additional benefits to allies",
          type: "effect_enhancement",
          value: 25,
          requiredNodes: 2,
          requiredMastery: "apprentice",
          effects: [
            {
              id: "protective_warmth",
              type: "ability_enhancement",
              target: "allies",
              value: 25,
              scaling: {
                baseValue: 25,
                perRank: 0,
                scalingType: "fixed",
                diminishingReturns: false,
              },
              isPercentage: true,
              stackable: false,
              description: "Fire aura effects are stronger for allies",
              displayFormat: "+{value}% Fire Aura effectiveness for allies",
            },
          ],
          isActive: false,
        },
      ],
      synergies: [],
      color: "#ff8800",
      icon: "ðŸ›¡ï¸ðŸ”¥",
      nodesInPath: 2,
      nodesUnlocked: 0,
      masteryLevel: "novice",
      conflictsWith: [],
      isExclusive: false,
    },
  ],
  totalNodesUnlocked: 0,
  totalPointsSpent: 0,
  availablePoints: 10, // Starting points
  maxTier: "master",
  treeLevel: 1,
  masteryLevel: 0,
  unlockRequirements: [
    { type: "character_level", value: 1, description: "Available from start" },
  ],
  isUnlocked: true,
  prestigeLevel: 0,
  resetCount: 0,
  lastReset: 0,
});

// Water Element Skill Tree
export const createWaterSkillTree = (characterId: string): SkillTree => ({
  id: `water_tree_${characterId}`,
  name: "Tides of Wisdom",
  description: "Master the flowing and healing power of water magic",
  characterId,
  element: "water",
  nodes: [
    // Basic Tier
    {
      id: "water_drop",
      name: "Water Drop",
      description: "Basic water magic - manipulate small amounts of water",
      tier: "basic",
      maxRank: 5,
      currentRank: 0,
      prerequisites: [],
      unlocks: ["water_bolt", "water_shield"],
      position: { x: 2, y: 0, tier: "basic" },
      costs: [
        {
          type: "skill_points",
          amount: 1,
          scaling: "linear",
          rankMultiplier: 1,
        },
      ],
      requirements: [],
      effects: [
        {
          id: "water_damage_basic",
          type: "stat_bonus",
          target: "self",
          value: 8,
          scaling: {
            baseValue: 8,
            perRank: 4,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: true,
          description: "Increases water damage",
          displayFormat: "+{value} Water Damage",
        },
      ],
      scaling: {
        baseValue: 8,
        perRank: 4,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "ðŸ’§",
      color: "#4488ff",
      category: "offensive",
      tags: ["elemental", "water", "basic"],
      isUnlocked: true,
      isLearnable: true,
      isMaxRank: false,
    },
    {
      id: "healing_spring",
      name: "Healing Spring",
      description: "Create a spring of healing water",
      tier: "intermediate",
      maxRank: 4,
      currentRank: 0,
      prerequisites: [
        { type: "node_rank", nodeId: "water_drop", minimumRank: 2 },
      ],
      unlocks: ["life_stream"],
      position: { x: 1, y: 2, tier: "intermediate", branch: "support" },
      costs: [
        {
          type: "skill_points",
          amount: 3,
          scaling: "linear",
          rankMultiplier: 1.5,
        },
      ],
      requirements: [],
      effects: [
        {
          id: "healing_spring_ability",
          type: "new_ability",
          target: "allies",
          value: 20,
          scaling: {
            baseValue: 20,
            perRank: 8,
            scalingType: "additive",
            diminishingReturns: false,
          },
          isPercentage: false,
          stackable: false,
          description: "Create healing area for allies",
          displayFormat: "Healing Spring: {value} healing per turn",
        },
      ],
      scaling: {
        baseValue: 20,
        perRank: 8,
        scalingType: "additive",
        diminishingReturns: false,
      },
      icon: "â›²",
      color: "#44aaff",
      category: "support",
      tags: ["elemental", "water", "healing", "aoe"],
      isUnlocked: false,
      isLearnable: false,
      isMaxRank: false,
      specializationPath: "healer",
      branchType: "specialized",
    },
  ],
  connections: [
    {
      fromNode: "water_drop",
      toNode: "healing_spring",
      connectionType: "prerequisite",
    },
  ],
  specializations: [
    {
      id: "healer",
      name: "Water Healer",
      description: "Focus on healing and support magic through water",
      element: "water",
      theme: "healer",
      keyNodes: ["healing_spring"],
      capstoneNode: "healing_spring",
      branchNodes: ["water_drop"],
      unlockRequirements: [
        {
          type: "nodes_unlocked",
          value: 2,
          description: "Unlock 2 water nodes",
        },
      ],
      masteryRequirements: [],
      pathBonuses: [],
      synergies: [],
      color: "#44aaff",
      icon: "ðŸ’§ðŸ’š",
      nodesInPath: 1,
      nodesUnlocked: 0,
      masteryLevel: "novice",
      conflictsWith: [],
      isExclusive: false,
    },
  ],
  totalNodesUnlocked: 0,
  totalPointsSpent: 0,
  availablePoints: 8,
  maxTier: "advanced",
  treeLevel: 1,
  masteryLevel: 0,
  unlockRequirements: [
    {
      type: "character_level",
      value: 5,
      description: "Requires character level 5",
    },
  ],
  isUnlocked: false,
  prestigeLevel: 0,
  resetCount: 0,
  lastReset: 0,
});

// Default skill trees for new characters
export const createDefaultSkillTrees = (characterId: string): SkillTree[] => [
  createFireSkillTree(characterId),
  createWaterSkillTree(characterId),
];

// Skill tree templates for different magical girl types
export const SKILL_TREE_TEMPLATES = {
  fire_focused: {
    name: "Fire Specialist",
    description: "Focuses on fire magic mastery",
    recommendedTrees: ["fire"],
    startingPoints: { fire: 15, water: 5 },
    recommendedPath: "destroyer",
  },
  balanced_elemental: {
    name: "Elemental Balance",
    description: "Balanced approach to multiple elements",
    recommendedTrees: ["fire", "water"],
    startingPoints: { fire: 10, water: 10 },
    recommendedPath: "hybrid",
  },
  support_healer: {
    name: "Support Healer",
    description: "Focus on healing and support abilities",
    recommendedTrees: ["water"],
    startingPoints: { water: 20 },
    recommendedPath: "healer",
  },
};

// Preset skill builds for common playstyles
export const PRESET_BUILDS = {
  fire_destroyer: {
    name: "Pure Destroyer",
    description: "Maximum offensive fire power",
    trees: {
      fire: {
        fire_spark: 5,
        fire_bolt: 3,
        fire_blast: 3,
        inferno: 2,
      },
    },
    totalPoints: 26,
  },
  balanced_fighter: {
    name: "Balanced Fighter",
    description: "Mix of offense and defense",
    trees: {
      fire: {
        fire_spark: 3,
        fire_bolt: 2,
        fire_resistance: 3,
        burning_hands: 2,
      },
    },
    totalPoints: 20,
  },
};
